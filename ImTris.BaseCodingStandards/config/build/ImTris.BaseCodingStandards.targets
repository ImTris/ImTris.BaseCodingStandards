<Project>
    <!-- Register the editorconfig files to the project -->
    <ItemGroup>
        <EditorConfigFiles Include="$(MSBuildThisFileDirectory)\..\files\*.editorconfig" />
        <GlobalAnalyzerConfigFiles Include="$(MSBuildThisFileDirectory)\..\files\*.editorconfig" />
    </ItemGroup>
    <!-- Banned Symbols -->
    <PropertyGroup>
        <IncludeDefaultBannedSymbols Condition="$(IncludeDefaultBannedSymbols) == ''">true</IncludeDefaultBannedSymbols>
    </PropertyGroup>

    <ItemGroup>
        <AdditionalFiles Include="$(MSBuildThisFileDirectory)\..\files\BannedSymbols.txt"
                         Condition="$(IncludeDefaultBannedSymbols) == 'true'"
                         Visible="false" />
    </ItemGroup>

    <Target Name="FormatCodeOnBuild" BeforeTargets="BeforeBuild">
        <Message Text="Formatting code..." Importance="high" />
        <Exec Command="dotnet format"
              WorkingDirectory="$(MSBuildProjectDirectory)"
              ContinueOnError="false">
            <Output TaskParameter="ExitCode" PropertyName="FormatExitCode" />
        </Exec>
        <Error Text="Code formatting failed with exit code $(FormatExitCode)"
               Condition="'$(FormatExitCode)' != '0'" />
    </Target>
</Project>